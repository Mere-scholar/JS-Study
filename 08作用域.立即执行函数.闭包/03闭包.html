<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>闭包</title>
	</head>
	<body>
		<script type="text/javascript">
			// 当内部函数被保存到外部时,将会生成闭包
			// 内存泄漏---造成作用域链该释放的额时候不释放,占用内存空间
			// 闭包的作用
			// 	1) 实现公有变量
// 			function add () {
// 				var count = 0;
// 				function demo () {
// 					count ++;
// 					console.log(count);
// 				}
// 				return demo;
// 			}
// 			var counter = add();
// 			counter();
			
			// 	2) 可以做缓存
// 			function test () {
// 				var num = 100;
// 				function a () {
// 					num ++ ;
// 					console.log(num)
// 				}
// 				function b () {
// 					num -- ;
// 					console.log(num)
// 				}
// 				return [a,b];
// 			}
// 			var myArr = test();
// 			myArr[0]();
// 			myArr[1]();
// 			function eater () {
// 				var food = "";
// 				var obj = {
// 					eat:function () {
// 						console.log("i am eating " + food);
// 						food = "";
// 					},
// 					push: function (myFood) {
// 						food = myFood;
// 					}
// 				}
// 				return obj;
// 			}
// 			var eater1 = new eater();
// 			eater1.push('banana');
// 			eater1.eat();
			
			// 	3) 可以实现封装,属性私有化
			// 	4) 模块化开发,防止污染变量
			
			
			
			// 闭包题-----
// 			function a () {
// 				function b () {
// 					var bbb = "456";
// 					console.log(aaa);
// 				}
// 				var aaa ='123';
// 				return b
// 			}
// 			var glob = 100;
// 			var demo = a();
// 			demo();

// 			function a () {
// 				var num = 100;
// 				function b () {
// 					num ++;
// 					console.log(num);
// 				}
// 				return b;
// 			}
// 			var demo = a();
// 			demo(); //101
// 			demo(); //102
			
			for(let i=0;i<4;i++){
			  setTimeout(function(){
			    console.log(i)
          // 0,1,2,3
			  },i*100)
			}
      
      for(var i=0;i<4;i++){
        setTimeout(function(){
          console.log(i)
          // 4,4,4,4
        },i*100)
      }
			
		</script>
	</body>
</html>
